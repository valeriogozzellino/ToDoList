<!DOCTYPE html>
<html>
  <head>
    <meta />
    <title>ToDoList</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main>
      <div class="bodygroup">
        <div id="titleapp">
          <h3>To Do List</h3>
        </div>
        <div id="bar_insert">
          <input id="inputText" type="text" placeholder="Name..." />
          <button
            class="inputButton"
            id="button_add"
            type="button"
            value="Add Item"
          >
            Add Item
          </button>
        </div>
        <div id="insertlist">
          <div id="elementlist">
            <div id="textlist"></div>
            <div id="icons"></div>
          </div>
        </div>
        <!--modificare lo stile di questi blocchi che vengono creati con un display flex -->
        <div id="bottom_section">
          <button type="button" class="inputButton" , id="button_clear">
            Clear Items
          </button>
        </div>
      </div>
    </main>

    <script>
      class TODOLIST {
        //creo una classe
        constructor() {
          this.tasks = []; //lista di stringhe
          console.log("taks", this.tasks);
        }
        addTask(task) {
          //mi arriav il valode da button o enter
          //creazione di un array che verrà inserito a schermo
          this.tasks.push(task);
          console.log("tasks", this.tasks);
          this.generaNuovoTask(task);
          //per mandarlo a schermo:
        }
        generaNuovoTask(task) {
          const todo = document.getElementById("insertlist");
          const el_list = document.createElement("elementlist");
          //???????const el_remove = document.getElementById("icons");
          el_list.appendChild(document.createTextNode(task));
          todo.appendChild(el_list);
          el_list.addEventListener("click", (e) => {
            this.endTask(task);
            e.srcElement.remove();
          });
        }
        endTask(task) {
          //in realtà questa funzione dovrebbe sbarrare il contenuto di "textlist"
          const index = this.tasks.indexOf(task);
          this.tasks.splice(index, 1);
          console.log(this.tasks);
          //   const barrtext = document.getElementById("textlist");
          //   markedText.changeText();
          // }
          // removeTask(task){

          // }
          // cleanAll(tansk)
        }
      }
      document.addEventListener("DOMContentLoaded", () => {
        //attendo che si carichi il dom
        const newTaskBtn = document.getElementById("button_add");
        const clearBtn = document.getElementById("button_clear");
        const input = document.getElementById("inputText");
        const todolist = new TODOLIST();
        newTaskBtn.addEventListener("click", () => {
          todolist.addTask(input.value);
          input.value = "";
        });
        clearBtn.addEventListener("click", () => {
          console.log("clean item");
        });
        input.addEventListener("keypress", (e) => {
          //gestione dell'evento con invio
          if (e.key === "Enter") {
            todolist.addTask(input.value);
            input.value = "";
          }
        });
      });
    </script>
  </body>
</html>
